---
import { tw } from "@/helpers/utils";
import type { MarkdownHeading } from "astro";
import type { CollectionEntry } from "astro:content";
import type { Props as RootLayoutProps } from "./Root.astro";
import RootLayout from "./Root.astro";

type Props = {
  headings: MarkdownHeading[];
  frontmatter: CollectionEntry<"posts">["data"];
  remark: Record<string, any>;
};

const { frontmatter, remark } = Astro.props;

const metadata = {
  title: frontmatter.title,
  description: frontmatter?.headline,
  image: { src: "/favicon.svg", alt: frontmatter?.media?.coverAlt },
  canonical: frontmatter.canonical,
  type: "article",
  publishedAt: frontmatter?.publishedAt?.toISOString(),
} satisfies RootLayoutProps;
---

<RootLayout {...metadata}>
  <main
    aria-label={frontmatter.title}
    class={tw([
      "prose prose-stone max-w-full dark:prose-invert",
      "prose-pre:border prose-inline-code:border",
      "prose-pre:border-gray-900/20 prose-inline-code:border-gray-900/20",
      "dark:prose-inline-code:border-gray-100/10",
      "prose-inline-code:rounded-lg prose-inline-code:font-normal ",
      "prose-pre:px-6 prose-pre:py-4 prose-inline-code:px-1",
      "",
      "",
      "",
      "",
      "",
    ])}
  >
    <div class="container">
      <p>{remark.duration}</p>
    </div>
    <div class="container">
      <slot name="post__content" />
    </div>
  </main>
</RootLayout>
