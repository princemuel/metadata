<Fragment set:html={null} />

<script is:inline>
  if (!window.AnalyticsService) {
    window.AnalyticsService = (function () {
      return {
        dispatch() {
          const payload = JSON.stringify({
            pathname: window.location.pathname,
            referrer: document.referrer,
          });
          const blob = new Blob([payload], { type: "application/json" });
          navigator.sendBeacon("/api/v1/analytics", blob);
        },
      };
    })();
  }
</script>

<script is:inline data-astro-rerun>
  window.AnalyticsService?.dispatch();
</script>
