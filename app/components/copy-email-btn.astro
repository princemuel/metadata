<button
  data-id="copy-email"
  class="font-sans text-sm text-slate-700 dark:text-slate-300"
>
  vansomecsam@gmail.com
</button>

<span
  data-id="copy-email-toast"
  class="pointer-events-none absolute -top-8 left-1/2 w-max -translate-x-1/2 rounded bg-black/90 px-2 py-1 text-[.625rem] text-slate-50 opacity-0 transition-colors group-hover:opacity-100"
>
</span>

<script>
  import { getElement } from "@/shared/helpers/dom";

  const btn = getElement("[data-id='copy-email']", HTMLButtonElement);
  const toast = getElement("[data-id='copy-email-toast']", HTMLSpanElement);

  const defaultMessage = "Click to Copy";
  toast.textContent = defaultMessage;

  btn.addEventListener("click", async (e) => {
    const target = e.target;
    if (target instanceof HTMLButtonElement) {
      try {
        await navigator.clipboard.writeText(target.innerText);
        toast.textContent = "Copied!";
      } catch (error) {
        console.error("Failed to copy: ", error);
      }
    }
  });

  btn.addEventListener("mouseout", () => {
    setTimeout(() => {
      toast.textContent = defaultMessage;
    }, 200);
  });
</script>
